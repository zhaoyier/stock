syntax = "proto3";
package garencieres;

//! 仓库
message Warehouse {
	int64 id = 1;
	string name = 2;
	string code = 3;
	int32 warehouseTypeId = 4; //仓库属性
	bool isUsed = 5;
}

enum AreaField {
	AreaFieldUnknown = 0;
	AreaFieldChina = 1;
	AreaFieldTaiWan = 2;
	AreaFieldUsa = 3;
}

enum PurchaseOrderStatus {
	Invalid = 0;
	Ready = 1;
	Allocated = 2;
	Filtered = 3;
	Assigned = 4;
	Purchased = 5;
	Completed = 6;
	Cancelled = 7;
	FilteredSeller = 8;
}

enum TagLable {
	TagInvalid = 0;
	TagNotFound = 1;
	TagReBuy = 2;
	TagOther = 3;
	TagNeedReply = 4;
	TagRPackage = 5;
	TagFromJX = 6;
	TagFromDG = 7;
	TagNotFoundInDG =8;
	TagNotFoundInJX = 9;
	TagNotFound2 = 10;
	TagBigRPackageDG = 11;
	TagBigRPackageJX = 12;
	TagNeedFixData = 13;
	TagRefunded = 14;
}

//! 区域
message Area {
	int64 id = 1;
	string name = 2;
	int32 code = 3;
	int64 warehouseId = 4;
	string warehouseName = 5;
	AreaField originNation = 6;
	bool isUsed = 7;
}

//1: 正常件 2: 问题件 3: 自主库区
enum WarehouseAreaField {
	WarehouseAreaFieldUnknown = 0;
	WarehouseAreaFieldNormal = 1;
	WarehouseAreaFieldProblem = 2;
	WarehouseAreaFieldIndependent = 3;
}

//! 库区
message WarehouseArea {
	int64 id = 1;
	string name = 2;
	string code = 3;
	int64 warehouseId = 4;
	int64 regionId = 5;
	int64 areaId = 6;
	int64 shipmentTypeId = 7;
	int64 deliveryTypeId = 8;
	WarehouseAreaField categoryId = 9;
	int32 atGroup = 10;
	int32 endGroup = 11;
}

message WarehouseAreaView {
	int64 id = 1;
	string name = 2;
	string code = 3;
	int64 warehouseId = 4;
	string warehouseName = 5;
	int64 regionId = 6;
	string regionCode = 7;
	int64 shipmentTypeId = 8;
	int64 deliveryTypeId = 9;
	WarehouseAreaField categoryId = 10;
	int64 areaId = 11;
	string areaName = 12;
	int32 atGroup = 13;
	int32 endGroup = 14;
	bool isUsed = 15;
	double percent = 16;
}

//! 库位
message Location {
	int64 id = 1;
	string code = 2;
	int64 warehouseId = 3;
	int64 warehouseAreaId = 4;
	int64 locationTypeId = 5;
	int64 areaId = 6;
	int32 positionX = 7;
	int32 positionY = 8;
	int32 positionZ = 9;
	bool isActive = 10;
}

message OrderItemInfo {
	int64 orderId = 1;
	int64 OrderItemId = 2;
	int64 locationId = 3;	// 实际库位
	int64 weight = 4;		//实际重量
	int64 deliveryTypeId = 5;
	int64 locationTypeId = 6;
}

message LocationView {
	int64 id = 1;
	string code = 2;
	int64 warehouseId = 3;
	string warehouseName = 4;
	int64 warehouseAreaId = 5;
	string warehouseAreaName = 6;
	int64 locationTypeId = 7;
	string locationTypeName = 8;
	int64 areaId = 9;
	string areaName = 10;
	int32 positionX = 11;
	int32 positionY = 12;
	int32 positionZ = 13;
	bool isActive = 14;
}

// 1:拼箱A 2:拼箱B 3:单发 4:自主 5:问题件
enum LocTypeField {
	LocTypeFieldUnknown = 0;
	LocTypeFieldLCLA = 1;
	LocTypeFieldLCLB = 2;
	LocTypeFieldSingleOut = 3;	// 所有大货，包括放在自主库位上的
	LocTypeFieldIndependent = 4;
	LocTypeFieldProblem = 5;
	LocTypeFieldABIn = 6;	// 所有小货
	LocTypeFieldProbPackage = 7;	// 问题包裹
}

message LocationType {
	int64 id = 1;
	string name = 2;
	LocTypeField type = 3;
	int32 skuNum = 4;
	// int64 weight = 5;
	int64 capacity = 6;
	int64 warehouseId = 7;
	string warehouseName = 8;	// 显示
	int32 customerNum = 9;
	int32 maxSkuNum = 10;
}

//! 预分配
message DistributeRule {
	int64 id = 1;
	int64 regionId = 2;	//目的国家
	int64 warehouseId = 3;
	int64 shipmentTypeId = 4;
	int64 warehouseAreaId = 5;
	int64 deliveryRegionId = 6;
	int64 deliveryTypeId = 7;
	int32 atGroup = 8;
	int32 endGroup = 9;
	int32 backupGroup = 10;
}

message DistributeRuleView {
	int64 id = 1;
	int64 regionId = 2;
	string regionCode = 3;
	int64 warehouseId = 4;
	string warehouseName = 5;
	int64 shipmentTypeId = 6;
	int64 warehouseAreaId = 7;
	string warehouseAreaName = 8;
	int64 deliveryRegionId = 9;
	int64 deliveryTypeId = 10;
	int32 atGroup = 11;
	int32 endGroup = 12;
	int32 backupGroup = 13;
}

message GroupRange {
	int32 atGroup = 1;
	int32 endGroup = 2;
}

message Wave{
  //! 唯一编号
	int64 id = 1;
  //! 库区
	int64 areaId = 2;
	string areaCode = 3;
  //! 波次配置
	WaveCatagory catagory = 4;
	int32 maxNum = 5;
	int64 maxWeight = 8;
  //最近一次的状态
	bool waveStatus = 7;
}

enum WaveCatagory{
  //! 播种(小货)
	Seed = 0;
  //! 大货
	BigGoods = 1;
	//虚拟波次
	Virtual = 2;
	//所有波次
	All = 3;
}

//! 拣货号
message Picking{
  //! 唯一标识
	int64  id = 1;
	string code = 2;
  //! 拣货任务编号
	string  pickingJobCode = 3;
  //! 波次编号
	int64  waveId = 4;
  //! 库区
	int64 areaId =10;
	string areaCode = 5;
  //! 通道
	string AisleCode = 11;
  //入库号最多的库位信息
	int64 locationId = 8;
	string locationCode = 9;
  //! 拣缺数
	int32 absentNum = 12;
  //是否有拣缺
	bool IsAbsent = 14;
  //! 入库号数量
	int32 stockInNum = 6;
  //! 拣货号备注
	string pickingRemark =13;
  //运输方式
	int64 shipmentTypeId = 15;
  //! 入库号集合
	repeated Stockin items = 7;

	int64 pickingWeight = 16;

}

message Stockin{
	string code = 1;
  //! 仓库
	int64 areaId = 3;
	string areaCode = 4;
	int64 locationId = 5;
	string locationCode = 6;
  //! 货架类型
	int32 locationTypeId = 7;
  //! 运输类型
	int64 shipmentTypeID = 8;
  //! 重量
	int32 weight = 9;
  //状态(见`PickingJobStatus`)
	int32 status = 10;
 //目的地
	string destinationCode = 11;
  //! 新订单号
	int64  orderId = 2;
  // ---
	string checkerName = 12;
	int64 stockInDate = 13;

	int64 pickerId =14;
	string pickerName = 15;
	int64 pickDate =16;
	string remark = 17;
	//all OrderItem
	repeated StockinOrderInfo orderInfo = 18;
	string pickingCode = 19;
	// 运输类型 code --> 展示
	string shipmentTypeCode = 20;

	string customerNickName = 21;

	int64 pickingId = 22;

	string TagInfo = 23;

	string RemarkInfo = 24;

	repeated string pkgCode = 25;
	//问题包裹货架号
	repeated string pkgLocationCode = 38;

	string errorCommiter = 26;

	int32 AbsentPickingNum = 27;

	string pickjobCode = 28;

	int64 oldOrderId = 29;

	waveSrc serviceType = 30;

	int64 pickingWeight = 31;
	//最近一次更新状态的时间戳
	int64 updateDate = 32;
	//入库号体积重
	int64 volumeWeight = 33;
	//客户是否已经回复
	string replyMsg = 34;
	//等待客户回复
	bool pendingReply =35;
	//客户已答复
	bool pendingAttention =36;

	repeated int64 oldOrderIds = 37;
}


//波次数据来源
enum waveSrc {
	Normal = 0;
	//buy for me 二次提交发货
	B4M	= 1;
}

//StockinCustomer CustomerInfo
message StockinCustomer {
	string customerNickName = 2;
	string customerName = 3;

	string customerPhone = 4;

	string customerAddress = 5;

	string customerPostcode = 6;
}

//StockOrderItem ...
message StockOrderItem {
	string goodsName = 1;
	float  goodsPrice = 2;
	string goodsHref = 3;
	int32  goodsNumber = 4;
	string goodsAltCategoryCode = 5;
}

//StockinStatus 入库号状态
enum StockinStatus {
	//非法状态
	invalid = 0;
	//已入库
	inWareHouse = 1;
	//已拣货
	picked = 2;
	//上架
	onLocation = 3;
	//下架
	offLocation = 4;
	//已打包
	packed = 5;
	//已取消
	canceled = 6;
	//老系统已打包
	packedInOldERP = 7;
	//波次中(放弃维护)
	inWave = 11;
	//波次释放
	waveReleased = 12;
	//拣货中
	picking = 13;
	//拣货异常
	missed = 21;
	//拣货完成
	complete = 99;
}

//PickingJobStatus 拣货任务号状态
enum PickingJobStatus {
  //Other Status
	unknown = 0;
  //! 波次中, 未释放
	Unreleased = 11;
  //! 已释放, 待分配拣货员
	Released = 12;
  //! 拣货中
	PickRunning = 13;
//分割拣货完成状态
	//已下架 没有扫描
	ReadytoScan = 3;
	//有入库号已被扫描
	Scanning = 4;
	//已打包
	Packed = 5;
  //! 拣货异常
	PickError = 21;
	// 拣货完全完成
	TotalComplete = 99;
}


//! 拣货任务
message PickingJob{
  //! 唯一标识
	int64 id = 1;
	string code = 2;
  //! 拣货员账户编号
	int64 pickerId = 3;
  //波次编号
	int64 waveId = 13;
  //! 任务状态
	PickingJobStatus status = 4;
  //! 库位
	string areaCode = 5 ;
	int64 areaId = 14 ;
  //! 时间
	int64  assignPickerDate = 6;
	int64  pickerFinishDate = 7;
	int64  createDate = 8;
	int64  updateDate = 9;
  //! 拣货数量
	int32  pickingNum = 10;
	int32  stockInNum = 11;
  //运输方式
	int64 shipmentTypeId = 15;
  //! 拣货集合
	repeated Picking items = 12;
}

//JobList: 用于展示的拣货任务集合
message JobList{
	int64 waveId = 1;
	WaveCatagory waveCatagory = 7;
	int64 areaId = 2;
	string areaCode =3;
	int32  pickingNum = 4;
	int32  stockInNum = 5;
	int64 pickingJobId = 6;
}

message SimpleJobView{
	string code = 1;
	int64 areaId = 2;
	int32 StockInNum = 3;
	int64 pickerId = 4;
	string pickerName = 5;
	int64  pickerFinishDate = 6;
	int64  assignPickerDate = 7;
	int64  jobId = 8;
	string pickingCode = 9;
	bool   isPrint = 10;
	string packerName = 11;
	bool isValid = 12;
	repeated string stockinCode = 13;
	int64 waveReleaseDate = 14;
	int64 weight = 15;
	PickingJobStatus pickjobStatus = 16;
}
//PickingLocation 库位按拣货单聚合
message PickingLocation{
	string locationCode = 1;
	int32 stockinNumber = 2;
}


message StockinPrintView{
	string stockinCode = 1;
	int64 stockinDate = 2;
}

message PrintPickingView{
	repeated PickingLocation pickingLocation = 20;
	string nickName = 2;
	int32 stockInNum =3;
	int32 weight = 4;
	string pickingCode = 5;
	int64 pickingId = 6;
	string pickerName = 9;
	string pickingJobCode = 7;
	string aisleCode = 17;
	repeated string packageCodes = 8;
	repeated StockinPrintView stockins = 21;
	int64 volumeWeight = 19;
}

message PickerPicking{
	string pickerName = 1;
	repeated PrintPickingView pickings= 2;
}

//Picker: 定义拣货员信息
message Picker{
	int64  pickerId = 1;
	string pickerName = 2;
	int32  pickingNum = 3;
}

//PickingView 返回的拣货号信息模板
message PickingView{
	int64 id = 1;
	string code = 2;
	string jobCode = 3;
	int64 waveId = 4;
	int64 areaId = 5;
	string aisleCode = 6;
	string areaCode = 7;
	int64 locationId = 8;
	string locationCode = 9;
	int32 absentNum = 10;
	bool isAbsent = 11;
	int32 stockInNum = 12;
	string pickingRemark = 13;
	WaveCatagory catagory = 14;
	repeated string pkgCode = 15;
	repeated string pkgLocationCode = 16;
}
//StockinOrderInfo Stockin对应的Order信息
message StockinOrderInfo{
	int64 Qty = 2;
	int64 OrderItemId = 3;
	int64 OrderId = 4;
	int32 UnitPrice = 5;
	string ProductName = 6;
	string ProductURL = 7;
	int64 OldOrderId = 8;
	string Sku = 9;
}

message Tag {
	int64 tagId = 1;
	string content = 2;
}

message StockInfo{
	string StockCode = 1;
	string StockBy = 2;
	int64 StockDate = 3;
	string StockRemark = 4;
	int64 ShipmentTypeId = 6;
	int64 RegionId = 7;
	int64 ProsourceRegionId = 8;
	int64 DeliveryTypeId = 9;
	int64 DeliveryStationId = 10;
	int64 OrderId = 11;
	int64 WarehouseId = 12;
	int32 BP = 13;
	int64 customerID = 14;
	string nickName = 15;
	repeated StockinOrderInfo Orders =5;
	int32 weight = 16;
	int64 oldOrderId = 17;
	repeated int64 oldOrderIds = 18;
}

// RePurchaseOrderItem defines the orderID and orderItemID 's  combination
message RePurchaseOrderItem{
	int64 orderID = 1;
	int64 orderItemID = 2;
	int64 rePurchaseQty = 3;
	string reason = 4;
	string sku = 7;
	int64 originQty = 8;
	int64 price = 9;
	string productName = 10;
}
