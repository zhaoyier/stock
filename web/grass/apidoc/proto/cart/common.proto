syntax = "proto3";
package cart;

import "cart/cart_public.proto";

//！ ping service
message PingReq {
    string msg = 1;
}

message PingResp {
    string msg = 1;
}

//! 通用响应
message Result {
    int32 code = 1; //errcode
    string message = 2; //errmsg
}

//! 假期设置
message HolidayItem {
    int64 id = 1;
    int64 begin_date = 2;
    int64 end_date = 3;
    bool is_active = 4;
    bool is_singleDay = 5;
    int64 regionId = 6; //国家地区
    int32 timeZone = 7;
}

// 购物车唯一标识
message CartIdentity {
    int64 gpid = 1;
    string skuId = 2;
    int64 serviceTypeId = 3; // 服务类型 1:buy4me,2:ship4me,3:prime,4:ezbuy
}

//! 修改购物车Item
message ModifyCartItem {
    CartIdentity cartId = 1; // 购物车唯一标识
    string newSkuId = 2; // 修改后的skuId
    int64 qty = 3;
    string remark = 4;
    int64 regionPrice = 5; // 商品来源地价格
}

// 批量编辑购物车数量
message ModifyCartQtyItem {
	CartIdentity cartId = 1; 	// 购物车唯一标识
	int64 qty = 2;
}

//! 商品信息
message CartProductInfo {
    string id = 1; // 预留逻辑id
    int64 gpid = 2; // gpid
    string skuId = 3; // skuId
    int64 price = 4; // 商品销售地货币
    int64 regionPrice = 5; // 商品来源地货币
    string productName = 6; // 商品名称
    string url = 7; // 商品url
    string productImage = 8; // 商品图片
    int64 qty = 9; // 数量
    string skuName = 10; // sku名称
    int64 gst = 11; // 新币gst
    int64 handlingFee = 12; // 美国手续费
    double handlingFeePercent = 13; // 美国手续费比例
    // 废弃
    string discountName = 14; // 合作卖家国际运费折扣
    repeated int64 tags = 15; //[1 == BuyForMe, 2 == CashOff, 3 == Gst, 4 == isSensitive 是否显示敏感标签文案， 5 == isFreeShipping 是否包邮活动, 6 == isOffSale 是否下架, 7 == isShowStock 是否展示库存, 8 == isMnCut 是否满件减]
    string symbol = 16; //  本地货币符号
    int64 serviceTypeId = 17; // 服务类型 1:buy4me,2:ship4me,3:prime,4:ezbuy
    string remark = 18; // 用户商品备注
    int64 internalExpressFee = 19; // 国内运费
    int64 shippingFee = 20; // 国际运费
    // 废弃
    CutOffInfo cutOffInfo = 21; // 满减信息
    int64 stockLeft = 22; //剩余库存
    string tagMsg = 23;   //标签文案
    repeated CartViewExt cartViewExts = 24; // 购物车视图标签信息
    string originalProductName = 25; // 原始商品名称
    bool isDisable = 26; // 是否不可选： 下架，屏蔽，来源平台屏蔽，服务类型不一致等原因
}

// 满减信息
message CutOffInfo {
    string key = 1;
    string name = 2;
}

//! BasketItem:商品列表
message CartItem {
    string vendorName = 1; // 卖家名
    string region = 2; // 卖家所在区域
    repeated CartProductInfo products = 3; // 商品列表
}

//! 购物车信息
message GetCartInfo {
    repeated CartItem cartItems = 1;
}

//! Element, only for client
message ElementInfo {
    bool insured = 1; //是否使用保险
    bool insuredEnabled = 2; //是否显示保险
    int64 credit = 3; //使用积分数
    bool creditEnabled = 4; //是否显示积分
    repeated int64 voucherIds = 5; //使用voucher列表
    bool voucherEnabled = 6; //是否显示voucher
    string coupon = 7; //使用coupon
    bool couponEnabled = 8; //是否显示coupon
    bool warehouseRequired = 9; //是否显示仓库
    bool shippingMethodRequired = 10; // 是否显示运输方式
    bool deliveryMethodRequired = 11; // 是否显示派送方式
    bool isAuthorizeBalance = 12; // 是否授权差额补齐
    bool authorizeForBalanceRequired = 13; // 是否显示差额补齐
    int64 validVoucherCount = 14; // 可选的voucher数量
    bool isMultiDelivery = 15; // 是否多地址选择
	string topMessage = 16; // 顶端模块文案
	string deliveryMessage = 17; // 派送模块文案
}

// 地址信息
message ExpressAddressInfo {
    // 废弃
	string shipToState = 1;			// 派送区域，用于计算派送费
    // 废弃
	int64 stationId = 2;			// 派送站点信息，用于计算派送费
	string recipient = 3;			//  收件人
    string phone = 4;				//  收件人电话
    // 废弃
	string address = 5;				// 收件人地址
    // 废弃
	string expressMethodCode = 6;	// HOME, MRT
	int64 customerAddressId = 7;	//  收件人地址id
    // 废弃
	int64 deliveryTypeId = 8;		// 派送类型Id
    // 废弃
	int64 stationTypeId = 9;		// 派送站点类型id
	int64 deliveryStationId = 10;	//  派送站点Id
    // 废弃
	string zipCode = 11;			// 收件人邮编
    // 废弃
	string stationName = 12;		// 派送站点名
    // 废弃
	string destCode = 13;			// 对于马来有东马和西马
	int64 periodId = 14;			//  时间段id
    // 废弃
	string periodName = 15;			// 时间段name
    string eta = 16; // 组内eta
}

//! Checkout information
message CheckoutInfo {
    int64 serviceTypeId = 1; // 服务类型 1:buy4me,2:ship4me,3:prime,4:ezbuy
    ElementInfo elementInfo = 2; //前端显示元素控制
    repeated RegionInfo regionInfo = 3; //商品来源相关信息
    ExpressAddressInfo expressAddressInfo = 4; // 派送地址信息
    FlashsalesProduct flashsalesProduct = 5; // 闪购产品信息
    Version Version = 6;

    // 03.15 拆分子订单版本
    // 这个版本之后的代码，不再使用上面定义的【deliveryAddress】
    // 按派送分组
    repeated DeliveryGroup deliveryGroups = 7;

    // 用户选择的派送组类别
    DeliveryGroupType deliveryGroupType = 8;
}

// 按派送分组
message DeliveryGroup {
    string groupKey = 1;
    repeated CartIdentity cartIds = 2; //选中的购物车Id

    int64 subWeight = 8; // 重量小计
    string eta = 11; // 组内eta
    ExpressInfo expressInfo = 12;
    TDeliveryAddress deliveryInfo = 13; // 仅仅只是为了传递前端进来的信息而已，不做任何操作。除非清空操作
}

// 精简——地址信息
message ExpressInfo {
	string state = 1;			// 派送区域，用于计算派送费
	int32 stationId = 2;			// 派送站点信息，用于计算派送费
	int32 addressId = 3;	//  收件人地址id
	string recipient = 4;			//  收件人
    string phone = 5;				//  收件人电话
	int32 periodId = 6;			//  时间段id
}

// 闪购信息
message FlashsalesProduct {
    int64 gpid = 1;
    string skuId = 2;
    string url = 3;
    int64 serviceTypeId = 4;
    int64 qty = 5;
    TPrice price = 6;
    string remark = 7;
    string region = 8;
    string settingId = 9;
}

//! 采购地区
message RegionInfo {
    string region = 1; //采购来源地区
    repeated ShipmentTypeInfo shipmentTypeInfos = 2; //运输方式
    repeated WarehouseInfo warehouseInfos = 3; //仓库信息
    int64 weight = 4; //该地区所有商品重量
    repeated CartIdentity cartIds = 5; //选中的购物车Id
    ExpressAddressInfo expressAddressInfo = 6; // elementInfo中的isMultiDelivery 为true时，使用该数据源，否则使用TCheckoutInfo的TDeliveryAddress
    int64 GroupId = 7; //  分组唯一Id
}

message TPrice {
    int64 regionPrice = 1; // 商品来源地价格
    int64 localPrice = 2; // 商品销售地价格
}

//！ 运输方式
message ShipmentTypeInfo {
    int64 id = 1;
    string code = 2;
    string name = 3;
    string desc = 4;
    int64 cost = 5;
    bool available = 6;
    int64 lastestEta = 7;
    bool isSelected = 8;
}

//! 仓库信息
message WarehouseInfo {
    string code = 1;
    string name = 2;
    bool isSelected = 3;
    bool available = 4;
}

//! 账单详情，按照category分
message BillDetail {
    string categoryName = 1;
    int64 total = 2;
}

// 优惠券
message CheckoutVoucher {
    string code = 1; // 业务内标识
    bool available = 2; // 是否可选（基于当前选择）
    bool expired = 3; // 是否过期
    string name = 4; // 名称
    string desc = 5; // 描述
    string pic = 6; // 图片地址
}

// 优惠券分组
message CheckoutVoucherGroup {
    string name = 1; // 组名
    repeated CheckoutVoucher vouchers = 2; // 优惠券
}

//! GA information
message GAInfo {
    string encryptShipmentId = 1;
    string encryptPaymentNo = 2;
    string encryptPackageIds = 3;
    string encryptPaymentId = 4;
}

message OrderItem {
    int64 id = 1; //id
    int64 gpid = 2; //商品id
    string skuId = 3; //skuid
    string remark = 4; //sku备注
    int64 qty = 5; //sku数量
    int64 unitPrice = 6; //sku单价int64(float * 100)
    int64 discountId = 7; //折扣id
    int64 totalPriceDiscount = 8;
    int64 totalProductPriceDiscount = 9;
    int64 shippingFeeDiscount = 10;
    int64 handlingFeeDiscount = 11;
    int64 expressFeeDiscount = 12;
    int64 agentFeeDiscount = 13;
    int64 insureFeeDiscount = 14;
    int64 gstDiscount = 15;
    int64 totalProductPrice = 16; //sku总价
    int64 handlingFeeRatio = 17; //int64(float * 100)
    int64 shipmentFee = 18; //int64(float * 100)	国内运费
    double currencyExchange = 19; //汇率
    string url = 20;
    int64 handlingFee = 21; //int64(float * 100)
    int64 shipment_type_id = 22;
    string warehouse_code = 23;
    int64 gst = 24; //int64(float * 100)
    bool insured = 25;
    int64 discount = 26; //int64(float * 100)
    int64 purchaseSourceId = 27;
    string alternativeColor = 28;
    bool isFlashSales = 29;
    string refId = 30;
    repeated int64 discountTypeIds = 31;
    bool isPreSale = 32;                    //是否预售，true为预售，false为现货【ReadyForArrangement true为现货】
    string skuImg = 33; //sku图片
    string mongoCartId = 34; // 提供给mongo的cartId
}


message OrderFee {
    int32 type = 1; //类型:0-国际运费,1-本地派送费,2-代购费,3-保险费,4-gst,5-handlingFee
    int64 balance = 2; //费用金额
    string remark = 3; //说明
}


message UserVoucher {
    int64 voucherId = 1; //voucher id
    int64 voucherTypeId = 2; //voucher type id
    int64 serviceTypeId = 3; //适用业务类型
    int64 fullAmount = 4; //满多少金额（本位币 分）
    int64 cutAmount = 5; //满减多少金额（本位币 分）
    string voucherTypeName = 6; //name
    int64 category = 7; //remark
    bool is_used = 8; //是否使用
    int64 startTime = 9; //有效期开始时间
    int64 endTime = 10; //有效期截止时间
    string picture = 11; //
    string name = 12;
}

message PaymentDiscountInfo {
	string discountName = 1;
	string altDiscountName = 2;
	int64 discountFee = 3;							//int64(float * 100)		折扣费用
}

message PaymentInfo {
    int64 Total = 1; //int64(float * 100)		账单总额
    int64 ActualPay = 2; //int64(float * 100)		账单真实付款额
    string CreditCardCouponCode = 3;
    int64 Coupon = 4; //int64(float * 100)		优惠劵
    int64 CreditCardShipmentDiscount = 5; //int64(float * 100)		信用卡用户折扣
    int64 Voucher = 6; //int64(float * 100)		积分抵扣
    repeated PaymentDiscountInfo VoucherRebates = 7; //	满减活动
    repeated PaymentDiscountInfo VoucherRedpackets = 8; // 红包活动
    repeated PaymentDiscountInfo VoucherFreeAgentFees = 9; // 免代购费券
    repeated PaymentDiscountInfo ShipmentDiscounts = 10;
    repeated PaymentDiscountInfo AgentDiscounts = 11;
    bool IsDeferPay = 12; //是否延迟支付
    int64 CreditValue = 13;
    int64 PromotionCouponId = 14;
    repeated int64 VoucherIds = 15;
}


message OrderExMsg {
    bool authorizeForBalance = 1;
    string originCode = 2;
    string Platform = 3;
}


message OrderInfo {
    int32 shipmentTypeId = 1; //运输方式id
    int64 prosourceRegionId = 2; //采购来源地id
    string remark = 3; //订单备注
    int64 etaDate = 4; //eta时间（天）
    int64 etaStartDate = 5;
    int64 etaEndDate = 6;
    int64 orderDate = 7; //下单日期
    int64 totalPrice = 8; //订单总价
    int64 totalProductPrice = 9; // 商品费用
    OrderExMsg exmsg = 10;
    PaymentInfo payment = 11;
    ShipmentInfo shipment = 12;
    repeated OrderFee feeList = 13; //fee
    repeated OrderItem itemList = 14; //items
}

message PackageResultInfo {
    string MsPackageNumber = 1;
    repeated string MsOrderNumbers = 2;
}

message BasketOrderMapping{
	int64 Gpid = 1;
	int64 OrderId = 2;
	int64 SkuId = 3;
}

message OrderResultInfo {
    int64 orderId = 1;
    string MsPaymentNumber = 2;
    repeated PackageResultInfo MsPackageInfos = 3;
    repeated string MsAgentOrderNumbers = 4;
    repeated BasketOrderMapping BasketOrderMappings = 5;
}

message UserShipmentDelivery {
    int64 DeliveryTypeId = 1;
    int64 StationTypeId = 2;
    int64 DeliveryStationId = 3;
    int64 PickupPeriodId = 4;
}

message ShipmentInfo {
    int64 CustomerAddressId = 1;
    string LocalDeliveryMethod = 2;
    string StationName = 3;
    int64 DeliveryDate = 4;
    string PeriodName = 5;
    string ShipToPhone = 6;
    string ShipToName = 7;
    string ShipToZip = 8;
    int64 DeliveryDistrictTypeId = 9;
    int64 SelfStationId = 10;
    int64 NeighbourhoodStationItemId = 11;
    int64 MrtStationItemId = 12;
    string ShipToAddress1 = 13;
    string ShipToState = 14;
    string LicenseNumber = 15;
    UserShipmentDelivery UserShipmentDelivery = 16;
}
